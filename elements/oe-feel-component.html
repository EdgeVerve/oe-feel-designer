<dom-module id="oe-feel-component">
    <template>
        <style>
            :host {
                position: relative;
                display: block;
                box-sizing: border-box;
            }

            .component-header {
                height: 30px;
                padding: 0px 8px;
                border-bottom: 1px solid rgba(0, 0, 0, 0.4);
                color: #FFF;
            }

            .component-panel.DECISION_TABLE .component-header{
                background: #90ee90;
            }

            .component-panel.BOXED_INVOCATION .component-header{
                background: #e699ff;
            }

            .component-panel.BOXED_CONTEXT .component-header{
                background: #ffcc33;
            }

            .component-panel.KNOWLEDGE_SOURCE .component-header{
                background: rgb(0, 153, 255);
            }

            .component-panel.BUSINESS_MODEL .component-header{
                background: #33ccff;
            }

            .component-panel.INPUT .component-header{
                background: rgb(182, 64, 64);
            }

            .component-panel.BUSINESS_MODEL:before{
                content: "";
                position: absolute;
                top: -1px;
                left: -1px;
                width: 15px;
                height: 15px;
                background: linear-gradient(to bottom right,white, white 49%, #999999 50%, transparent 51%,transparent);
            }
            .component-panel.BUSINESS_MODEL:after{
                content: "";
                position: absolute;
                right: -1px;
                bottom: -1px;
                width: 15px;
                height: 15px;
                background: linear-gradient(to top left,white, white 49%, #999999 50%, transparent 51%,transparent);
            }


            .component-header label{
                padding: 0px 8px;
            }


            .component-panel {
                background: #FFF;
                height: 100px;
                min-width: 150px;
                border: 1px solid rgba(0, 0, 0, 0.4);
                box-shadow: 3px 3px 1px 1px rgba(0, 0, 0, 0.3);
                border-radius: 2px;
                position: relative;
            }
            .component-panel iron-icon{
                --iron-icon-width:16px;
                --iron-icon-height:16px;
            }
        </style>
        <div class$="component-panel [[node.nodeType]]">
            <div class="component-header layout horizontal justified center">
                <iron-icon icon="oe-feel-icons:[[_getNodeIcon(node.nodeType)]]"></iron-icon>
                <label>[[node.name]]</label>
                <iron-icon icon="icons:settings" on-tap="_launchSetting"></iron-icon>
                <iron-icon icon="delete" on-tap="_deleteComponent"></iron-icon>
            </div>
            <div>

            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: "oe-feel-component",
            properties: {
                node: {
                    type: Object
                }
            },
            ready: function () {
                var icons = [{
                        nodeType: 'DECISION_TABLE',
                        icon: 'decision'
                    },
                    {
                        nodeType: 'BOXED_INVOCATION',
                        icon: 'invocation'
                    },
                    {
                        nodeType: 'BOXED_CONTEXT',
                        icon: 'context'
                    },
                    {
                        nodeType: 'KNOWLEDGE_SOURCE',
                        icon: 'knowledge'
                    },
                    {
                        nodeType: 'BUSINESS_MODEL',
                        icon: 'business-model'
                    },
                    {
                        nodeType: 'INPUT',
                        icon: 'input'
                    }
                ];
                this.set('iconsList', icons);
            },
            _getNodeIcon: function (nodeType) {
                var selectedIcon = this.iconsList.find(function (icon) {
                    return icon.nodeType === nodeType;
                });
                return selectedIcon.icon;
            },
            _launchSetting:function(){
                this.fire('open-node-setting',this.node);
            },
            _deleteComponent:function(){
                this.fire('delete-component',this.node);
            },
            behaviors: [],
            listeners: {}
        })
    </script>
</dom-module>